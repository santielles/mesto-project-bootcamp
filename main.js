(()=>{"use strict";var e=document.querySelector(".cards"),t=document.getElementById("template").content.querySelector(".card");function n(e,n){var r=t.cloneNode(!0),o=r.querySelector(".card__image"),c=r.querySelector(".card__title");return o.src=n,o.alt=e,c.textContent=e,r}function r(t){e.prepend(t)}var o=document.getElementById("overlay-image-open"),c=o.querySelector(".popup__overlay-image"),a=o.querySelector(".popup__overlay-caption");function i(e){e.classList.remove("popup_opened"),e.storedListener&&(document.removeEventListener("keydown",e.storedListener),e.storedListener=null)}function s(e){var t=function(t){!function(e,t){"Escape"===e.key&&i(t)}(t,e)};e.classList.add("popup_opened"),document.addEventListener("keydown",t),e.storedListener=t}function l(e){e.disabled=!0}function d(e,t){var n=e.querySelector(t.buttonSelector);e.querySelectorAll(t.inputSelector).forEach((function(r){r.addEventListener("input",(function(){(function(e,t){e.validity.valid?function(e,t){var n="error-"+e.id;document.getElementById(n).textContent="",e.classList.remove(t.invalidInputTextClass)}(e,t):function(e,t,n){var r="error-"+e.id;document.getElementById(r).textContent=t,e.classList.add(n.invalidInputTextClass)}(e,e.validationMessage,t)})(r,t),function(e,t){e?t.disabled=!1:l(t)}(e.checkValidity(),n)}))}))}var u,p=document.querySelector(".profile"),m=p.querySelector(".profile__name"),f=p.querySelector(".profile__about"),v=p.querySelector(".profile__edit-button"),y=p.querySelector(".profile__add-button"),_=document.getElementById("edit-profile-popup"),g=document.forms.editProfileForm,k=g.elements.profileInputName,L=g.elements.profileInputJob,S=document.getElementById("new-card-popup"),E=document.forms.newCardForm,b=E.elements.newCardFormTitle,x=E.elements.newCardFormLink,q=document.querySelectorAll(".popup__close-button");v.addEventListener("click",(function(){k.value=m.textContent,L.value=f.textContent,s(_)})),y.addEventListener("click",(function(){E.reset(),s(S)})),g.addEventListener("submit",(function(e){return function(e){e.preventDefault(),m.textContent=k.value,f.textContent=L.value,i(_),l(e.submitter)}(e)})),E.addEventListener("submit",(function(e){return function(e){e.preventDefault(),r(n(b.value,x.value)),i(S),l(e.submitter)}(e)})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){r(n(e.name,e.link))})),q.forEach((function(e){e.addEventListener("click",(function(){i(e.closest(".popup"))})),e.closest(".popup").addEventListener("mousedown",(function(e){e.target===e.currentTarget&&i(e.currentTarget)}))})),e.addEventListener("click",(function(e){var t;e.target.classList.contains("card__like")&&e.target.classList.toggle("card__like_mode-active"),e.target.classList.contains("card__delete-button")&&e.target.closest(".card").remove(),e.target.classList.contains("card__image")&&(t=e.target,c.src=t.src,c.alt=t.alt,a.textContent=t.alt,s(o))})),u={inputSelector:".popup__input",buttonSelector:".popup__button",formSelector:".popup__form",invalidInputTextClass:"popup__input-invalid"},document.querySelectorAll(u.formSelector).forEach((function(e){d(e,u),l(e.querySelector(u.buttonSelector))}))})();