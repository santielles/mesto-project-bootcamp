(()=>{"use strict";var e=document.getElementById("overlay-image-open"),t=e.querySelector(".popup__overlay-image"),n=e.querySelector(".popup__overlay-caption");function o(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",c)}function r(e){e.classList.add("popup_opened"),document.addEventListener("keydown",c)}function c(e){"Escape"===e.key&&o(document.querySelector(".popup_opened"))}var d=document.querySelector(".cards"),u=document.getElementById("template").content.querySelector(".card");function a(o){var c=u.cloneNode(!0),d=c.querySelector(".card__image"),a=c.querySelector(".card__title"),i=c.querySelector(".card__like"),l=c.querySelector(".card__delete-button");return d.src=o.link,d.alt=o.name,a.textContent=o.name,i.addEventListener("click",(function(){!function(e){e.classList.toggle("card__like_mode-active")}(i)})),l.addEventListener("click",(function(){l.closest(".card").remove()})),d.addEventListener("click",(function(){var o,c;o=d.src,c=d.alt,t.src=o,t.alt=c,n.textContent=c,r(e)})),c}function i(e){d.prepend(e)}function l(e,t){var n=e.querySelector(t.buttonSelector),o=e.querySelectorAll(t.inputSelector);p(n),o.forEach((function(o){o.addEventListener("input",(function(){(function(e,t){e.validity.valid?function(e,t){var n="error-"+e.id;document.getElementById(n).textContent="",e.classList.remove(t.invalidInputTextClass)}(e,t):function(e,t,n){var o="error-"+e.id;document.getElementById(o).textContent=t,e.classList.add(n.invalidInputTextClass)}(e,e.validationMessage,t)})(o,t),function(e,t){e?t.disabled=!1:p(t)}(e.checkValidity(),n)}))}))}function p(e){e.disabled=!0}var s,m=document.querySelector(".profile"),f=m.querySelector(".profile__name"),v=m.querySelector(".profile__about"),y=m.querySelector(".profile__edit-button"),_=m.querySelector(".profile__add-button"),k=document.getElementById("edit-profile-popup"),S=document.forms.editProfileForm,E=S.elements.profileInputName,g=S.elements.profileInputJob,q=document.getElementById("new-card-popup"),L=document.forms.newCardForm,b=L.elements.newCardFormTitle,x=L.elements.newCardFormLink,h=document.querySelectorAll(".popup__close-button");y.addEventListener("click",(function(){E.value=f.textContent,g.value=v.textContent,r(k)})),_.addEventListener("click",(function(){L.reset(),p(L.querySelector(".popup__button")),r(q)})),S.addEventListener("submit",(function(e){return function(e){e.preventDefault(),f.textContent=E.value,v.textContent=g.value,o(k)}(e)})),L.addEventListener("submit",(function(e){return function(e){e.preventDefault(),i(a({name:b.value,link:x.value})),o(q)}(e)})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){i(a(e))})),h.forEach((function(e){var t=e.closest(".popup");e.addEventListener("click",(function(){o(t)})),t.addEventListener("mousedown",(function(e){e.target===e.currentTarget&&o(e.currentTarget)}))})),s={inputSelector:".popup__input",buttonSelector:".popup__button",formSelector:".popup__form",invalidInputTextClass:"popup__input-invalid"},document.querySelectorAll(s.formSelector).forEach((function(e){l(e,s)}))})();